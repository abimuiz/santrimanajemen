# Student Management System

## Overview

This is a full-stack student management system built for managing religious school (santri) data. The application provides comprehensive CRUD operations for student records, data visualization through charts, and file import/export capabilities. It's designed with a clean, modern interface using React and TypeScript on the frontend with Express.js and PostgreSQL on the backend.

## System Architecture

### Frontend Architecture
- **Framework**: React 18 with TypeScript
- **Routing**: Wouter for client-side navigation
- **State Management**: TanStack Query (React Query) for server state management
- **UI Framework**: Radix UI components with shadcn/ui design system
- **Styling**: Tailwind CSS with custom design tokens
- **Build Tool**: Vite for fast development and optimized builds
- **Charts**: Chart.js for data visualization

### Backend Architecture
- **Runtime**: Node.js with Express.js framework
- **Language**: TypeScript with ES modules
- **Database ORM**: Drizzle ORM for type-safe database operations
- **Database**: PostgreSQL (configured for Neon database)
- **File Processing**: Multer for file uploads, ExcelJS for Excel processing, PDFKit for PDF generation
- **Development**: tsx for TypeScript execution in development

### Project Structure
- `client/` - Frontend React application
- `server/` - Backend Express.js API
- `shared/` - Shared TypeScript types and schemas
- `migrations/` - Database migration files (generated by Drizzle)

## Key Components

### Database Schema
- **Students Table**: Comprehensive student records including personal information, family details, academic data, and administrative fields
- **Fields**: ID, registration numbers (noUrut, noReg, nis), personal info (nama, nik, jenisKelamin, etc.), address details, parent information, class assignments, and contact information

### API Endpoints
- `GET /api/students` - Retrieve students with search and filtering capabilities
- `GET /api/students/:id` - Get individual student details
- `POST /api/students` - Create new student record
- `PUT /api/students/:id` - Update existing student
- `DELETE /api/students/:id` - Remove student record
- `POST /api/students/import/excel` - Import students from Excel files
- `GET /api/students/export/excel` - Export students to Excel
- `GET /api/students/:id/pdf` - Generate PDF report for individual student
- `GET /api/dashboard/stats` - Get dashboard statistics

### UI Components
- **Dashboard**: Overview with statistics cards and charts
- **Student List**: Filterable table with search, pagination, and bulk operations
- **Student Form**: Comprehensive form for adding/editing student information
- **Student Detail Modal**: Detailed view of student information
- **Charts**: Class distribution and age range visualizations
- **Sidebar Navigation**: Main application navigation

## Data Flow

1. **Student Data Entry**: Users input student information through forms with validation
2. **Database Operations**: Data is validated using Zod schemas and processed through Drizzle ORM
3. **Real-time Updates**: TanStack Query manages cache invalidation and real-time UI updates
4. **File Processing**: Excel import/export functionality processes bulk student data
5. **Report Generation**: PDF generation creates formatted student reports
6. **Statistics**: Dashboard aggregates and displays student statistics with interactive charts

## External Dependencies

### Frontend Dependencies
- **UI Components**: Extensive Radix UI primitive components
- **Form Handling**: React Hook Form with Zod validation
- **HTTP Client**: Native fetch API with TanStack Query wrapper
- **Date Handling**: date-fns for date manipulation
- **Charting**: Chart.js for data visualization
- **Styling**: Tailwind CSS with various plugins

### Backend Dependencies
- **Database**: @neondatabase/serverless for PostgreSQL connection
- **ORM**: Drizzle ORM with PostgreSQL dialect
- **File Processing**: Multer, ExcelJS, PDFKit
- **Validation**: Zod schemas shared between frontend and backend
- **Session Management**: connect-pg-simple for PostgreSQL sessions

## Deployment Strategy

### Development
- **Local Development**: `npm run dev` runs both frontend (Vite) and backend (tsx) concurrently
- **Database**: Uses DATABASE_URL environment variable for PostgreSQL connection
- **Hot Reload**: Vite provides instant frontend updates, tsx enables backend hot reload

### Production
- **Build Process**: `npm run build` compiles frontend with Vite and backend with esbuild
- **Deployment Target**: Configured for Replit's autoscale deployment
- **Port Configuration**: Backend serves on port 5000, mapped to external port 80
- **Static Assets**: Frontend builds to `dist/public`, served by Express in production

### Database Management
- **Migrations**: Drizzle Kit handles schema migrations with `npm run db:push`
- **Schema**: Centralized in `shared/schema.ts` for type safety across frontend and backend
- **Connection**: Uses connection pooling through Neon's serverless driver

## Changelog

Changelog:
- June 16, 2025. Initial setup with complete student management system
- June 16, 2025. Fixed TypeScript compilation errors and Select component issues
- June 16, 2025. Implemented comprehensive CRUD operations with filtering and search
- June 16, 2025. Added Excel import/export and PDF generation capabilities

## User Preferences

Preferred communication style: Simple, everyday language.